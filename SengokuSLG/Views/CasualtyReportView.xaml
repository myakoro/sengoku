<UserControl x:Class="SengokuSLG.Views.CasualtyReportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="720" d:DesignWidth="1080">
    <Grid Background="{StaticResource BrushBgBase}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource BrushBgHeader}" BorderBrush="{StaticResource BrushBorder}" BorderThickness="0,0,0,2" Padding="20,15">
            <Grid>
                <TextBlock Text="ðŸ“‹ å…µå£«æè€—ãƒ¬ãƒãƒ¼ãƒˆ" FontSize="24" FontWeight="Bold" Foreground="{StaticResource BrushTextMain}" VerticalAlignment="Center"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="æˆ»ã‚‹" Command="{Binding BackCommand}" Style="{StaticResource ButtonSecondary}" Width="100" Margin="0,0,10,0"/>
                    <Button Content="CSV" Style="{StaticResource ButtonSecondary}" Width="100"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20">
            <StackPanel>
                <!-- æè€—ã‚µãƒžãƒªãƒ¼ -->
                <Border Background="{StaticResource BrushBgCard}" BorderBrush="{StaticResource BrushBorder}" BorderThickness="2" CornerRadius="6" Padding="15" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock FontSize="14" FontWeight="Bold" Foreground="{StaticResource BrushTextMain}" Margin="0,0,0,10">
                            <Run Text="æè€—ã‚µãƒžãƒªãƒ¼: 300äºº â†’ 270äººï¼ˆæè€—çŽ‡10.0%ï¼‰"/>
                        </TextBlock>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- æ­»äº¡ -->
                            <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                <TextBlock Text="æ­»äº¡" FontSize="11" Foreground="#666" HorizontalAlignment="Center"/>
                                <TextBlock Text="12äºº" FontSize="20" FontWeight="Bold" Foreground="#c73940" HorizontalAlignment="Center"/>
                                <TextBlock Text="4.0%" FontSize="11" HorizontalAlignment="Center" Margin="0,2,0,4"/>
                                <Border Background="#f8d7da" BorderBrush="#f5c6cb" BorderThickness="1" CornerRadius="3" Padding="4,2">
                                    <TextBlock Text="äººå£âˆ’12" FontSize="10" Foreground="#721c24" HorizontalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- å»ƒå…µ -->
                            <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                <TextBlock Text="å»ƒå…µ" FontSize="11" Foreground="#666" HorizontalAlignment="Center"/>
                                <TextBlock Text="8äºº" FontSize="20" FontWeight="Bold" Foreground="#FF9800" HorizontalAlignment="Center"/>
                                <TextBlock Text="2.7%" FontSize="11" HorizontalAlignment="Center" Margin="0,2,0,4"/>
                                <Border Background="#f8d7da" BorderBrush="#f5c6cb" BorderThickness="1" CornerRadius="3" Padding="4,2">
                                    <TextBlock Text="äººå£âˆ’8" FontSize="10" Foreground="#721c24" HorizontalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- è² å‚· -->
                            <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                <TextBlock Text="è² å‚·" FontSize="11" Foreground="#666" HorizontalAlignment="Center"/>
                                <TextBlock Text="25äºº" FontSize="20" FontWeight="Bold" Foreground="#2d7a3e" HorizontalAlignment="Center"/>
                                <TextBlock Text="8.3%" FontSize="11" HorizontalAlignment="Center" Margin="0,2,0,4"/>
                                <Border Background="#d4edda" BorderBrush="#c3e6cb" BorderThickness="1" CornerRadius="3" Padding="4,2">
                                    <TextBlock Text="å½±éŸ¿ãªã—" FontSize="10" Foreground="#155724" HorizontalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- é€ƒæ•£ -->
                            <StackPanel Grid.Column="3" HorizontalAlignment="Center">
                                <TextBlock Text="é€ƒæ•£" FontSize="11" Foreground="#666" HorizontalAlignment="Center"/>
                                <TextBlock Text="5äºº" FontSize="20" FontWeight="Bold" Foreground="#8b4513" HorizontalAlignment="Center"/>
                                <TextBlock Text="1.7%" FontSize="11" HorizontalAlignment="Center" Margin="0,2,0,4"/>
                                <Border Background="#f8d7da" BorderBrush="#f5c6cb" BorderThickness="1" CornerRadius="3" Padding="4,2">
                                    <TextBlock Text="äººå£âˆ’5" FontSize="10" Foreground="#721c24" HorizontalAlignment="Center"/>
                                </Border>
                            </StackPanel>
                        </Grid>
                        <Border Background="#f8d7da" BorderBrush="#f5c6cb" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,10,0,0">
                            <TextBlock FontSize="12" Foreground="#721c24">
                                <Run Text="äººå£æ¸›å°‘åˆè¨ˆ: 25äºº" FontWeight="Bold"/>
                                <Run Text="ï¼ˆæ­»äº¡12 + å»ƒå…µ8 + é€ƒæ•£5ï¼‰"/>
                            </TextBlock>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- ã‚¿ãƒ– -->
                <Border Background="{StaticResource BrushBgPanel}" BorderBrush="{StaticResource BrushBorder}" BorderThickness="1" CornerRadius="6,6,0,0" Padding="0" Margin="0,0,0,0">
                    <StackPanel Orientation="Horizontal">
                        <Button Content="æ­»äº¡" Style="{StaticResource StyleNavButton}" Background="{StaticResource BrushBgCard}" Padding="15,10" FontSize="14" FontWeight="Bold"/>
                        <Button Content="å»ƒå…µ" Style="{StaticResource StyleNavButton}" Padding="15,10" FontSize="14"/>
                        <Button Content="è² å‚·" Style="{StaticResource StyleNavButton}" Padding="15,10" FontSize="14"/>
                        <Button Content="é€ƒæ•£" Style="{StaticResource StyleNavButton}" Padding="15,10" FontSize="14"/>
                    </StackPanel>
                </Border>

                <!-- æ­»äº¡è€…ä¸€è¦§ -->
                <Border Background="{StaticResource BrushBgCard}" BorderBrush="{StaticResource BrushBorder}" BorderThickness="2" CornerRadius="0,0,6,6" Padding="15" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="æ­»äº¡è€…ä¸€è¦§ï¼ˆ12äººï¼‰ - è‡ªå®¶å…µ8äºº / å€Ÿã‚Šå…µ4äºº" FontSize="14" FontWeight="Bold" Foreground="{StaticResource BrushTextMain}" Margin="0,0,0,10"/>
                        <DataGrid ItemsSource="{Binding DeadSoldiers}" AutoGenerateColumns="False" 
                                  Background="White" BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                                  HeadersVisibility="Column" GridLinesVisibility="Horizontal" 
                                  RowBackground="White" AlternatingRowBackground="#f9f9f9"
                                  CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="åå‰" Binding="{Binding Name}" Width="120"/>
                                <DataGridTextColumn Header="å…µç¨®" Binding="{Binding Type}" Width="100"/>
                                <DataGridTextColumn Header="å‡ºèº«çŸ¥è¡Œåœ°" Binding="{Binding Village}" Width="150"/>
                                <DataGridTemplateColumn Header="è‡ª/å€Ÿ" Width="100">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Border Background="#1976d2" CornerRadius="3" Padding="5,2">
                                                <TextBlock Text="è‡ªå®¶å…µ" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                            </Border>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Header="å°éšŠ" Binding="{Binding Squad}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>

                <!-- çŸ¥è¡Œåœ°åˆ¥äººå£æ¸›å°‘ -->
                <Border Background="{StaticResource BrushBgCard}" BorderBrush="{StaticResource BrushBorder}" BorderThickness="2" CornerRadius="6" Padding="15" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="çŸ¥è¡Œåœ°åˆ¥äººå£æ¸›å°‘" FontSize="14" FontWeight="Bold" Foreground="{StaticResource BrushTextMain}" Margin="0,0,0,10"/>
                        <DataGrid ItemsSource="{Binding VillageImpact}" AutoGenerateColumns="False" 
                                  Background="White" BorderBrush="{StaticResource BrushBorder}" BorderThickness="1"
                                  HeadersVisibility="Column" GridLinesVisibility="Horizontal" 
                                  RowBackground="White" AlternatingRowBackground="#f9f9f9"
                                  CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="çŸ¥è¡Œåœ°" Binding="{Binding Name}" Width="150"/>
                                <DataGridTextColumn Header="æ­»äº¡" Binding="{Binding Deaths}" Width="80"/>
                                <DataGridTextColumn Header="å»ƒå…µ" Binding="{Binding Disabled}" Width="80"/>
                                <DataGridTextColumn Header="é€ƒæ•£" Binding="{Binding Fled}" Width="80"/>
                                <DataGridTextColumn Header="åˆè¨ˆ" Binding="{Binding Total}" Width="80"/>
                                <DataGridTemplateColumn Header="äººå£æ¸›å°‘" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock FontWeight="Bold" Foreground="#E53935">
                                                <Run Text="â†’ âˆ’"/>
                                                <Run Text="{Binding Total}"/>
                                            </TextBlock>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                        <Border Background="#fff3cd" BorderBrush="#ffc107" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,10,0,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="âš " FontSize="16" Margin="0,0,8,0"/>
                                <TextBlock Text="æ‘Aã®äººå£ãŒ6äººæ¸›å°‘ / ä»–æ‘å€Ÿå…µã®æè€—ãŒ7äººç™ºç”Ÿ" FontSize="12" Foreground="#856404"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- æƒ…å ±ã¨ãƒœã‚¿ãƒ³ -->
                <Border Background="{StaticResource BrushBgCard}" BorderBrush="{StaticResource BrushBorder}" BorderThickness="2" CornerRadius="6" Padding="15">
                    <StackPanel>
                        <Border Background="#d1ecf1" BorderBrush="#bee5eb" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="âœ“ æ­»äº¡ãƒ»å»ƒå…µãƒ»é€ƒæ•£ã®äººå£æ¸›å°‘ã‚’è‡ªå‹•åæ˜ " FontSize="12" Foreground="#0c5460" Margin="0,0,0,4"/>
                                <TextBlock Text="âœ“ è² å‚·å…µã¯æ²»ç™‚å¾Œã«å¾©å¸°ï¼ˆäººå£å½±éŸ¿ãªã—ï¼‰" FontSize="12" Foreground="#0c5460" Margin="0,0,0,4"/>
                                <TextBlock Text="âœ“ å€Ÿã‚Šå…µã®æè€—ã¯æˆ¦åŠŸãƒšãƒŠãƒ«ãƒ†ã‚£ã«åæ˜ æ¸ˆã¿" FontSize="12" Foreground="#0c5460"/>
                            </StackPanel>
                        </Border>
                        <StackPanel Orientation="Horizontal">
                            <Button Content="äººå£ãƒ‡ãƒ¼ã‚¿ç¢ºèª" Style="{StaticResource ButtonSecondary}" Margin="0,0,10,0"/>
                            <Button Content="æˆ¦åŠŸãƒ¬ãƒãƒ¼ãƒˆã¸" Style="{StaticResource ButtonPrimary}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
