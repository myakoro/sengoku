あなたは「戦国立身出世SLG」プロジェクトの 実装担当（Antigravity） です。

これから v0.4 の実装フェーズ に入ってください。
以下の指示は 絶対遵守 とします。

■ 0. あなたの責務（再定義・明文化）

あなたは次を担当します：

設計（内部仕様）

コード記述

データ構造の内部最適化

ロジックの動作実装

テスト（正常系/異常系）

あなたが 絶対にしてはいけないこと：

ゲーム仕様の解釈変更

新機能の追加（“親切心の追加”も禁止）

UIデザインやレイアウトの改変

仕様書にないロジックの導入

v0.4 のスコープ外の実装

あなたの設計基準は “仕様書_v0.4.md + UIモック制作ガイド + Windsurf のHTML” だけです。

■ 1. 使用する資料（すべて変更禁止）

必ず以下を読み、
これらだけを基準に実装を行ってください。

■ 1-1. 「仕様書_v0.4.md」＝ v0.4 の機能・ロジック仕様

含まれるもの：

公務 / 私事 の行動仕様

行動結果（功績・評価・貸し・金・人口・開発度）

日付進行（日→月→年）

月次処理（集計内容）

月次サマリー表示用データ構造

データモデル（v0.4 必須分）

エッジケースの扱い

ロジックの基礎は絶対にこの仕様通りに実装すること。

■ 1-2. 「UIモック_v0.4_制作ガイド.md」＝ UIの仕様書

含まれるもの：

各画面の必須表示項目

必要な UI コンポーネント

カラーパレット・フォント・余白ルール

画面遷移

コンポーネントの命名規則

画面構造の禁止改変ポイント

画面の項目漏れ・命名ずれを発生させないこと。

■ 1-3. Windsurf の「v0.4 HTMLモック（5画面）」

メイン画面

公務選択

私事選択

行動結果ダイアログ

月次サマリー

UIの“実際の構造”として最優先で参照してください。

UIはこの HTML を基準に構築します。
（ロジックは仕様書_v0.4.md優先）

■ 1-4. 和風UI Style Guide（v0.3から継続）

UIデザインの統一のため、
UIの外観は Style Guide > Windsurfモック > 制作ガイド > v0.4仕様書 の順で優先
※表示項目は仕様書優先、見た目はStyleGuide優先。

■ 1-5. 過去バージョン（v0.3）実装

v0.3 の実装を 壊さず に拡張すること

UI構造の互換性を維持すること

■ 2. v0.4 で実装すべき「完成形の状態」

あなたが実装した v0.4 は、プレイヤーが以下を行える状態になっていなければならない。

【A】1日につき 1回、行動（公務 or 私事）を実行できる

公務：功績・評価・貸し・治安・開発度の変動

私事：金・人口・開発度の変動

私事では功績が絶対に発生しない（仕様）


【B】行動結果が「ダイアログ」と「行動ログ」に反映される

行動結果ダイアログは Windsurf HTML の構造を再現

行動ログはメイン画面右の簡易ログ（最新5件）

【C】日付が「日 → 月 → 年」と正しく進行する

日付+1

月の境界超え → 月次処理 → 月次サマリー

サマリー後「次月へ」でメインへ戻る


【D】月次サマリーに以下を正しく表示できる

公務回数

公務成功率（v0.4は100%）

功績増分（軍事/政務/密功）

評価変化

金の収支

村A/B の人口・開発の増分

これらは 仕様書_v0.4.md の DTO 仕様 に合わせる。

【E】村A/B（2村）の状態が正常に変動する

治安（公務）

開発度（公務・私事）

人口（私事）

収入（月次）

【F】データモデル（仕様書 9章）を完全に満たす

House

Lord

Village

OfficialDuty

PrivateAction

DailyLog

MonthlySummary

GameState（中央管理）

構造変更は禁止。
内部追加フィールドは許可するが、仕様を変える用途に使わないこと。

■ 3. v0.4 で絶対に実装してはいけないもの（禁止）

以下は コードにも UI にも出してはいけない。

戦闘 / 軍事AI / 部隊 / 出陣

家臣団（採用・忠誠・育成・補佐官 etc.）

任官・辞令・出世イベント

婚姻・世代交代

引き抜き（浪人・陪臣）

調略（埋伏 etc.）

評定（会議UI・政治AI）

主命（特別ミッション）

旬イベント・年次イベント

ランダムイベント

天候 / 兵站 / 損害計算

自動増加・自然減少（人口・治安 etc.）

v0.4 のスコープ外の機能は完全禁止
理由：ロードマップと別紙の整合を守るため。