# v0.8 メイン画面への追加要素

## 📋 概要

v0.8の婚姻・元服・世代交代機能の通知要素を含むメイン画面のサンプルを作成しました。
**注意**: `main_v0.55.html`は変更していません。`v0.8_メイン画面_通知サンプル.html`として別ファイルで作成しています。

---

## ✅ 追加した要素

### 1. ヘッダー部分
**世代交代インジケータ**を追加
- **表示条件**: 当主が60歳以上の場合
- **デザイン**: オレンジ色のバッジ（⚠ 継承準備）
- **位置**: 日付情報の右側

```html
<span class="succession-indicator">
    <span class="succession-indicator-icon">⚠</span>
    <span>継承準備</span>
</span>
```

### 2. 左ナビゲーション
**婚姻・家族メニューを追加**

#### 婚姻メニュー
- **表示**: 常に表示（クリック可能）
- **通知バッジ**: 縁談オファーがある場合に赤丸バッジ（数字付き）
- **位置**: 「調略」の下

```html
<div class="nav-item">
    婚姻
    <span class="notification-badge">3</span>
</div>
```

#### 家族メニュー
- **表示**: 常に表示（クリック可能）
- **通知アイコン**: 元服可能な子供がいる場合に黄色アイコン（!）
- **位置**: 「婚姻」の下

```html
<div class="nav-item">
    家族
    <span class="genpuku-indicator">!</span>
</div>
```

### 3. 右サイドバー
**今月の出来事セクション**を追加（コンパクト版）
- **位置**: 「家臣団サマリー」の下
- **表示内容**: v0.8イベントの通知
  - 縁談の申し出（赤色）
  - 元服イベント（黄色）
  - 子供誕生（緑色）
  - その他の情報（青色）
- **改善点**: 
  - フォントサイズを小さく（12px）
  - パディングを削減
  - テキストを簡潔に

```html
<div class="sidebar-section compact">
    <div class="sidebar-title">■ 今月の出来事</div>
    <ul class="event-list">
        <li class="event-item">
            <span class="event-icon marriage">●</span>
            <span>田中家から縁談の申し出</span>
        </li>
        <li class="event-item">
            <span class="event-icon genpuku">●</span>
            <span>山田 三郎が元服（従僕）</span>
        </li>
        <li class="event-item">
            <span class="event-icon birth">●</span>
            <span>子供誕生（山田 夏子）</span>
        </li>
        <li class="event-item">
            <span class="event-icon info">●</span>
            <span>税収を100貫得た</span>
        </li>
    </ul>
</div>
```

---

## 🎨 追加したCSSクラス

### `.notification-badge`（縁談通知バッジ）
```css
.notification-badge {
    position: absolute;
    top: 8px;
    right: 10px;
    background: #f44336;
    color: #fff;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
}
```

### `.genpuku-indicator`（元服通知アイコン）
```css
.genpuku-indicator {
    position: absolute;
    top: 8px;
    right: 10px;
    background: #ffc107;
    color: #fff;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
}
```

### `.succession-indicator`（世代交代インジケータ）
```css
.succession-indicator {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    background: #ff9800;
    color: #fff;
    padding: 5px 12px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    margin-left: 15px;
}
```

---

## 🔧 実装時の注意点

### 表示条件（Antigravityが実装）

#### 縁談通知バッジ
- **条件**: `HouseData.MarriageCandidates.Count > 0`
- **数字**: `MarriageCandidates.Count`を表示
- **非表示**: オファーがない場合は`<span>`ごと削除

#### 元服通知アイコン
- **条件**: 15歳に達した子供がいる（`IsAdult == true && IsGenpuku == false`）
- **非表示**: 該当する子供がいない場合は`<span>`ごと削除

#### 世代交代インジケータ
- **条件**: 当主の年齢が60歳以上
- **非表示**: 60歳未満の場合は`<span>`ごと削除

#### 今月の出来事
- **条件**: 月次処理で以下のイベントが発生した場合
  - 婚姻候補生成
  - 元服イベント
  - 子供誕生
- **表示**: 該当イベントのみを動的に生成

---

## 📊 画面遷移

### 婚姻メニューをクリック
→ `v0.8_婚姻候補一覧画面.html`に遷移

### 家族メニューをクリック
→ `v0.8_子供元服管理画面.html`に遷移

### 今月の出来事の項目をクリック
- 縁談の申し出 → `v0.8_婚姻候補一覧画面.html`
- 元服イベント → `v0.8_子供元服管理画面.html`
- 子供誕生 → `v0.8_子供元服管理画面.html`

---

## 🎯 右サイドバーのコンパクト化

### 改善内容
右サイドバーが長すぎる問題を解決するため、以下の調整を実施：

1. **全体的なパディング削減**
   - `.sidebar-section.compact`: padding 15px → 12px
   - セクション間マージン: 20px → 15px

2. **フォントサイズの最適化**
   - タイトル: 16px → 15px
   - stat-row: 14px → 13px
   - 能力値ラベル: 11px → 10px
   - 能力値アイコン: 20px → 16px
   - 能力値数値: 20px → 16px

3. **コンポーネントの簡略化**
   - 補佐官セクションを削除（メイン画面では不要）
   - 従僕枠セクションを削除（メイン画面では不要）
   - 行動ログを削除（今月の出来事に統合）

4. **今月の出来事の最適化**
   - イベント項目のフォント: 12px
   - パディング: 8px → 6px
   - テキストを簡潔に（「がありました」→削除）

### 結果
- スクロール量が大幅に削減
- 重要な情報は維持
- 視認性は向上

---

## ✅ 既存機能への影響

### main_v0.55.htmlへの影響
**影響なし** - 既存ファイルは一切変更していません。

### v0.8_メイン画面_通知サンプル.html
- 新規作成ファイル
- v0.8要素を含むメイン画面のサンプル
- 右サイドバーをコンパクト化

---

## 🎯 デザインの統一性

### v0.55との整合性
- **色味**: 既存の和風カラーパレットを維持
- **フォント**: 游明朝体を継続使用
- **レイアウト**: 既存のグリッド構造を崩さない
- **ボーダー**: 既存の`#8b4513`（茶色）を使用

### v0.8固有の配色
- **赤色（#f44336）**: 縁談通知（重要度高）
- **黄色（#ffc107）**: 元服通知（注意喚起）
- **オレンジ（#ff9800）**: 世代交代準備（警告）
- **緑色（#4caf50）**: 子供誕生（ポジティブ）

---

## 📝 今後の拡張

### Phase 2
- 通知バッジのアニメーション（点滅など）
- 通知数が多い場合の「9+」表示
- 通知クリック時のハイライト効果

### Phase 3
- 通知の既読/未読管理
- 通知履歴の表示
- 通知のフィルタリング機能

---

**作成日**: 2025年12月1日  
**対象ファイル**: `main_v0.55.html`  
**バージョン**: v0.8  
**ステータス**: 完成
