# v0.9 UI モック - 画面遷移図

**制作日**: 2025年12月3日  
**バージョン**: v0.9

---

## 📊 全体遷移フロー

```
┌─────────────────────────────────────────────────────────┐
│                     【メイン画面】                        │
│                                                         │
│  ・役職管理                                              │
│  ・編成管理                                              │
│  ・隊状態確認                                            │
│  ・出陣                                                  │
└─────────────────────────────────────────────────────────┘
                          │
        ┌─────────────────┼─────────────────┐
        │                 │                 │
        ▼                 ▼                 ▼
┌───────────┐   ┌───────────┐   ┌───────────┐
│06_役職一覧│   │01_軍事編成│   │02_隊状態  │
│   画面    │   │   画面    │   │ パネル    │
└───────────┘   └───────────┘   └───────────┘
        │                 │                 │
        │                 │                 │
        ▼                 ▼                 ▼
┌───────────┐   ┌───────────┐   ┌───────────┐
│07_家臣詳細│   │08_大隊管理│   │09_中隊管理│
│   画面    │   │   画面    │   │   画面    │
└───────────┘   └───────────┘   └───────────┘
                        │                 │
                        │                 │
                        ▼                 ▼
                ┌───────────┐   ┌───────────┐
                │03_戦場UI  │   │10_小隊詳細│
                │ (簡易版)  │   │   画面    │
                └───────────┘   └───────────┘
                        │
                        │
                        ▼
                ┌───────────┐
                │11_追撃判定│
                │   画面    │
                └───────────┘
                        │
                        │
                        ▼
                ┌───────────┐
                │12_戦闘結果│
                │ サマリー  │
                └───────────┘
                        │
        ┌───────────────┴───────────────┐
        │                               │
        ▼                               ▼
┌───────────┐                   ┌───────────┐
│04_兵士損耗│                   │05_家臣戦功│
│ レポート  │                   │ レポート  │
└───────────┘                   └───────────┘
        │                               │
        └───────────────┬───────────────┘
                        │
                        ▼
                ┌───────────┐
                │ メイン画面 │
                │   (戻る)  │
                └───────────┘
```

---

## 🔄 詳細遷移マップ

### 1. メイン画面からの遷移

| 遷移先 | ボタン/メニュー | 説明 |
|--------|----------------|------|
| 06_役職一覧画面 | [役職管理] | 役職階層の確認・管理 |
| 01_軍事編成画面 | [編成管理] | 軍事編成の設定 |
| 02_隊状態パネル | [隊状態確認] | 訓練度・士気等の確認 |
| 08_大隊管理画面 | [出陣] | 戦闘開始前の大隊管理 |

---

### 2. 役職管理系の遷移

```
06_役職一覧画面
    ├─ [詳細] → 07_家臣詳細画面
    ├─ [配置変更] → 配置変更画面（別途）
    └─ [編成管理] → 01_軍事編成画面
```

```
07_家臣詳細画面
    ├─ [編集] → 家臣編集画面（別途）
    ├─ [配置変更] → 配置変更画面（別途）
    └─ [戻る] → 06_役職一覧画面
```

---

### 3. 編成管理系の遷移

```
01_軍事編成画面
    ├─ [隊状態パネル] → 02_隊状態パネル
    ├─ [兵種バランス調整] → 兵種調整画面（別途）
    ├─ [手動入替] → 個人配置画面（別途）
    ├─ [戦力シミュレーション] → 戦力試算画面（別途）
    ├─ 中隊カードクリック → 09_中隊管理画面
    ├─ 小隊カードクリック → 10_小隊詳細画面
    └─ [戻る] → メイン画面
```

```
02_隊状態パネル
    ├─ [小隊内訳] → 10_小隊詳細画面
    ├─ [個人詳細] → 07_家臣詳細画面
    ├─ [訓練実施] → 訓練設定画面（別途）
    ├─ [休息命令] → 休息設定画面（別途）
    └─ [戻る] → 01_軍事編成画面
```

---

### 4. 部隊管理系の遷移

```
08_大隊管理画面
    ├─ [出陣] → 03_戦場UI
    ├─ [前線⇔後衛入替] → 中隊配置変更
    └─ [戻る] → メイン画面
```

```
09_中隊管理画面
    ├─ [詳細] → 10_小隊詳細画面
    └─ [戻る] → 01_軍事編成画面
```

```
10_小隊詳細画面
    ├─ [個人詳細] → 07_家臣詳細画面
    ├─ [戦力内訳] → 戦力詳細画面（別途）
    └─ [戻る] → 09_中隊管理画面 or 01_軍事編成画面
```

---

### 5. 戦闘系の遷移

```
03_戦場UI（簡易版）
    ├─ [詳細表示] → 02_隊状態パネル
    ├─ [戦力シミュレーション] → 戦力試算画面（別途）
    ├─ 崩壊発生 → 11_追撃判定画面
    └─ [戦闘終了] → 12_戦闘結果サマリー
```

```
11_追撃判定画面
    ├─ [追撃を実行する] → 追撃実行 → 12_戦闘結果サマリー
    ├─ [追撃を見送る] → 12_戦闘結果サマリー
    └─ [戻る] → 03_戦場UI
```

```
12_戦闘結果サマリー
    ├─ [損耗レポート] → 04_兵士損耗レポート
    ├─ [戦功レポート] → 05_家臣戦功レポート
    └─ [メインへ] → メイン画面
```

---

### 6. 戦闘後レポート系の遷移

```
04_兵士損耗レポート
    ├─ [人口データを確認] → 知行地管理画面（別途）
    ├─ [戦功レポートへ] → 05_家臣戦功レポート
    ├─ [詳細CSV] → CSVエクスポート
    └─ [戻る] → 12_戦闘結果サマリー
```

```
05_家臣戦功レポート
    ├─ [詳細表示] → 07_家臣詳細画面
    ├─ [主人公ステータスへ] → 主人公ステータス画面（別途）
    ├─ [戦功を確定] → 戦功反映 → メイン画面
    ├─ [詳細CSV] → CSVエクスポート
    └─ [戻る] → 12_戦闘結果サマリー
```

---

## 🎯 主要な遷移パターン

### パターン1: 編成 → 戦闘 → 結果
```
メイン画面
  → 01_軍事編成画面
  → 08_大隊管理画面
  → 03_戦場UI
  → 11_追撃判定画面
  → 12_戦闘結果サマリー
  → 04_兵士損耗レポート
  → 05_家臣戦功レポート
  → メイン画面
```

### パターン2: 役職確認 → 詳細確認
```
メイン画面
  → 06_役職一覧画面
  → 07_家臣詳細画面
  → メイン画面
```

### パターン3: 隊状態確認 → 訓練実施
```
メイン画面
  → 02_隊状態パネル
  → 訓練設定画面（別途）
  → メイン画面
```

### パターン4: 編成調整 → 小隊詳細確認
```
メイン画面
  → 01_軍事編成画面
  → 09_中隊管理画面
  → 10_小隊詳細画面
  → 07_家臣詳細画面
  → メイン画面
```

---

## 🔗 画面間の相互参照

### 双方向遷移
以下の画面は双方向に遷移可能：

| 画面A | ⇔ | 画面B |
|-------|---|-------|
| 01_軍事編成画面 | ⇔ | 02_隊状態パネル |
| 01_軍事編成画面 | ⇔ | 09_中隊管理画面 |
| 01_軍事編成画面 | ⇔ | 10_小隊詳細画面 |
| 06_役職一覧画面 | ⇔ | 07_家臣詳細画面 |
| 09_中隊管理画面 | ⇔ | 10_小隊詳細画面 |
| 04_兵士損耗レポート | ⇔ | 05_家臣戦功レポート |

### 一方向遷移（戻るボタンのみ）
以下の画面は一方向のみ：

| 遷移元 | → | 遷移先 |
|--------|---|--------|
| 08_大隊管理画面 | → | 03_戦場UI |
| 03_戦場UI | → | 11_追撃判定画面 |
| 11_追撃判定画面 | → | 12_戦闘結果サマリー |
| 12_戦闘結果サマリー | → | 04_兵士損耗レポート |
| 12_戦闘結果サマリー | → | 05_家臣戦功レポート |

---

## 📱 モーダル・ポップアップ

以下の画面はモーダル/ポップアップとして表示される可能性：

| 画面 | 表示形式 | 説明 |
|------|---------|------|
| 11_追撃判定画面 | モーダル | 戦場UI上にオーバーレイ表示 |
| 配置変更画面 | モーダル | 各画面上にオーバーレイ表示 |
| 訓練設定画面 | モーダル | 隊状態パネル上にオーバーレイ表示 |
| 休息設定画面 | モーダル | 隊状態パネル上にオーバーレイ表示 |

---

## ✅ 遷移設計のチェックポイント

- [x] メイン画面から全主要画面へアクセス可能
- [x] 戦闘フローが一方向で明確
- [x] 編成管理系が相互参照可能
- [x] 役職管理系が相互参照可能
- [x] 戦闘後レポートが相互参照可能
- [x] すべての画面から[戻る]でメインに戻れる
- [x] モーダル画面が適切に設計されている

---

**制作日**: 2025年12月3日  
**関連ファイル**: `v0.9_UI_INDEX.md`
